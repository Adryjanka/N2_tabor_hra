<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Password Checker</title>
    <script src="https://cdn.jsdelivr.net/npm/js-sha256@0.9.0"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/aes.js"></script>
    <style>
        .task {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .task h3 {
            margin-right: 10px;
        }

        .output {
            margin-left: 10px;
            padding: 5px;
            border: 1px solid black;
            color: white;
        }

        .correct {
            background-color: green;
        }

        .incorrect {
            background-color: red;
        }
    </style>
</head>
<body>
<div class="task">
    <h3>ŠIFRA 1. Tak co? Umíte počítat?</h3>
    <input type="text" id="task1" oninput="checkPassword('task1', 'fc9e91cc78e1817d80b4ba8c2dc9a638d0c57959825ee34f5e3d7688ad80dfb9', 'output1', 'U2FsdGVkX180/pYlQTH/hGsrj6mxJZrQLSeFaf3r9uNAHUBzNiDB83SNp6rCBec4G18OTeUNHbvMifpD3VoEIsWKfb8fqvV/iij8aoFLxVI=')" placeholder="Napiš odpověď">
    <p id="output1" class="output incorrect">Abys zjistil kam dál, vlož odpověď.</p>
</div>
<div class="task">
    <h3>ŠIFRA 2. Napište heslo </h3>
    <input type="text" id="task2" oninput="checkPassword('task2', 'c8cf4b35a3284fc0ee403ce5129efa09a1922cfdd6c118bd29443f0690650161', 'output2', 'U2FsdGVkX18DGW+Cs0zIf2n0GP1WaRn6XkSC2IpsTaxzYAP48nYFk+11Qsc5pzAqrJ3G+sTy1d2PClZT93gUWfRN9REKg7UTMPy/64xpAwY=')" placeholder="Napiš odpověď">
    <p id="output2" class="output incorrect">Abys zjistil kam dál, vlož odpověď.</p>
</div>
<div class="task">
    <h3>ŠIFRA 3. Zadejte tajenku </h3>
    <input type="text" id="task3" oninput="checkPassword('task3', 'c8cf4b35a3284fc0ee403ce5129efa09a1922cfdd6c118bd29443f0690650161', 'output3', 'U2FsdGVkX18MjSV5PCVdB2T4ubh5d9ec3WOJVm2YwSEEn7JJi6ECcq1COhEpVE/U9Ssqd/6kyGTJ1hGPIsYBhLV1me7IaSugzv6AHrS9T2g=')" placeholder="Napiš odpověď">
    <p id="output3" class="output incorrect">Abys zjistil kam dál, vlož odpověď.</p>
</div>
<div class="task">
    <h3>ŠIFRA 4. Zadejte jednotlivá písmena bez mezer </h3>
    <input type="text" id="task4" oninput="checkPassword('task4', '88d4266fd4e6338d13b845fcf289579d209c897823b9217da3e161936f031589', 'output4', 'U2FsdGVkX1/qFje1arEbeYxD+kvM3cRVN/Y6axJ0DEVfDeBeJeTwAUVw2HU/nAdvu02lULJ9wVosphEicIIYXyPGjXmeb7azb1lGZikIZvE=')" placeholder="Napiš odpověď">
    <p id="output4" class="output incorrect">Abys zjistil kam dál, vlož odpověď.</p>
</div>
<script>
    function removeDiacritics(str) {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
    }
    function checkPassword(taskId, hashedPassword, outputId, encryptedSecretKey) {
        const taskInput = removeDiacritics(document.querySelector(`#${taskId}`).value.toLowerCase());
        const hashedInput = sha256(taskInput);
        const output = document.querySelector(`#${outputId}`);

        if (hashedInput === hashedPassword) {
            const decrypted = CryptoJS.AES.decrypt(encryptedSecretKey, taskInput).toString(CryptoJS.enc.Utf8);
            output.innerText = `${decrypted}`;
            output.className = 'output correct';
        } else {
            output.innerText = `Bohužel, "${taskInput}" není správně.`;
            output.className = 'output incorrect';
        }
    }
</script>
</body>
</html>
